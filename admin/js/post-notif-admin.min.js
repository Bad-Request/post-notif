!function(a){"use strict";a(function(){a("#id_btnPostNotifSend").click(function(b){var c=document.getElementById("id_hdnPostID").value;jQuery("#id_btnPostNotifSend").hide(),jQuery("#id_spnPostNotifStatus").text(post_notif_send_ajax_obj.processing_msg);var d=document.getElementById("id_radSendPostNotifNow");if(d.checked)jQuery("#id_spnPostNotifSchedRadioButtons").hide(),a.post(ajaxurl,{action:"init_post_notif_send",post_id:c},function(b){if("-1"===b.status)jQuery("#id_spnPostNotifStatus").text(b.message);else{jQuery("#id_post_notif_progress_bar").progressbar();var d=setInterval(function(){a.post(ajaxurl,{action:"get_post_notif_send_status",post_id:c},function(a){if("-1"===a)jQuery("#id_divSendPostNotifProgressBar").progressbar({value:100}),clearInterval(d),jQuery("#id_spnSendPostNotifProgressBarLabel").text("100%");else{var b=Math.floor(100*a);jQuery("#id_divSendPostNotifProgressBar").progressbar({value:b}),jQuery("#id_spnSendPostNotifProgressBarLabel").text(b+"%")}})},1e3);a.post(post_notif_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_send_ajax_obj.nonce,action:"post_notif_send",post_id:c},function(a){jQuery("#id_spnPostNotifStatus").text(a.message),jQuery("#id_spnPostNotifLastSent").text(a.timestamp),jQuery("#id_spnPostNotifLastSent").show()})}});else{var e=a("#id_postNotifSchedYear").val(),f=a("#id_postNotifSchedMonth").val(),g=a("#id_postNotifSchedDay").val(),h=a("#id_postNotifSchedHour").val(),i=a("#id_postNotifSchedMinute").val(),j=new Date(e,f-1,g,h,i);if(j.getFullYear()!=e||1+j.getMonth()!=f||j.getDate()!=g||j.getMinutes()!=i)return jQuery("#id_spnPostNotifStatus").text(post_notif_send_ajax_obj.invalid_date_format_msg),jQuery("#id_btnPostNotifSend").show(),!1;var k=new Date;if(j<=k)return jQuery("#id_spnPostNotifStatus").text(post_notif_send_ajax_obj.past_date_msg),jQuery("#id_btnPostNotifSend").show(),!1;jQuery("#id_spnPostNotifSchedRadioButtons").hide();var l=1+j.getMonth()+":"+j.getDate()+":"+j.getFullYear()+":"+j.getHours()+":"+j.getMinutes();a.post(post_notif_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_send_ajax_obj.nonce,action:"schedule_post_notif_send",post_id:c,datetime_local:l},function(a){jQuery("#id_spnPostNotifSendSchedTimestamp").hide(),jQuery("#id_spnPostNotifScheduledFor").text(a.timestamp),jQuery("#id_spnPostNotifScheduledFor").show(),jQuery("#id_btnPostNotifCancelSchedSend").show(),jQuery("#id_spnPostNotifStatus").text(a.message)})}})}),a(function(){a("#id_radSendPostNotifNow").click(function(a){this.checked&&(jQuery("#id_spnPostNotifSendSchedTimestamp").hide(),jQuery("#id_btnPostNotifSend").prop("value",jQuery("#id_hdnPostNotifSendNowLabel").val()))}),a("#id_radSendPostNotifSched").click(function(a){this.checked&&(jQuery("#id_spnPostNotifSendSchedTimestamp").show(),jQuery("#id_btnPostNotifSend").prop("value",jQuery("#id_hdnPostNotifSchedSendLabel").val()))})}),a(function(){a("#id_btnPostNotifCancelSchedSend").click(function(b){var c=document.getElementById("id_hdnPostID").value;jQuery("#id_btnPostNotifCancelSchedSend").hide(),a.post(post_notif_cancel_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_cancel_send_ajax_obj.nonce,action:"unschedule_post_notif_send",post_id:c},function(a){jQuery("#id_spnPostNotifScheduledFor").hide(),a.update_last_sent&&(jQuery("#id_spnPostNotifLastSent").text(a.update_last_sent_text),jQuery("#id_spnPostNotifLastSent").show()),a.cancelled&&(jQuery("#id_radSendPostNotifNow").prop("checked",!0),jQuery("#id_radSendPostNotifSched").prop("checked",!1),jQuery("#id_spnPostNotifSchedRadioButtons").show(),jQuery("#id_btnPostNotifSend").prop("value",jQuery("#id_hdnPostNotifSendNowLabel").val()),jQuery("#id_btnPostNotifSend").show()),jQuery("#id_spnPostNotifStatus").text(a.message)})})}),a(function(){a("#id_btnPostNotifTestSend").click(function(b){var c=a("#id_hdnPostID").val(),d=a("#id_emlPostNotifTestSendRecipients").val();jQuery("#id_spnTestPostNotifStatus").text(post_notif_test_send_ajax_obj.processing_msg),a.post(post_notif_test_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_test_send_ajax_obj.nonce,action:"test_post_notif_send",post_id:c,recipients:d},function(a){var b="",c="";a.sent_email_arr.length>0&&(b="<strong>"+a.successfully_sent_label+"</strong><br />",a.sent_email_arr.forEach(function(a){b=b+a+"<br />"}),b+="<br /><br />"),a.invalid_email_arr.length>0&&(c="<strong>"+a.invalid_email_address_label+"</strong><br />",a.invalid_email_arr.forEach(function(a){c=c+a+"<br />"})),jQuery("#id_spnTestPostNotifStatus").html(a.process_complete_message+"<br /><br />"+b+c)})})}),a(function(){a("#available_categories\\[0\\]").click(function(b){this.checked?a(".cats").each(function(){this.checked=!0,this.disabled=!0}):a(".cats").each(function(){this.checked=!1,this.disabled=!1})})})}(jQuery);
