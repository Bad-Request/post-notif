!function(a){"use strict";a(function(){a("#id_btnPostNotifSend").click(function(b){var c=document.getElementById("id_hdnPostID").value;if(a("#id_btnPostNotifSend").hide(),a("#id_spnPostNotifStatus").text(post_notif_send_ajax_obj.processing_msg),a("#id_spnPostNotifSendNowOrSchedActive").hasClass("pn-sendnow"))a("#id_divPostNotifManualSendControls").hide(),a.post(ajaxurl,{action:"init_post_notif_send",post_id:c},function(b){if("-1"===b.status)a("#id_spnPostNotifStatus").text(b.message);else{a("#id_post_notif_progress_bar").progressbar();var d=setInterval(function(){a.post(ajaxurl,{action:"get_post_notif_send_status",post_id:c},function(b){if("-1"===b)a("#id_divPostNotifProgressBar").progressbar({value:100}),clearInterval(d),a("#id_spnPostNotifProgressBarLabel").text("100%");else{var c=Math.floor(100*b);a("#id_divPostNotifProgressBar").progressbar({value:c}),a("#id_spnPostNotifProgressBarLabel").text(c+"%")}})},1e3);a.post(post_notif_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_send_ajax_obj.nonce,action:"post_notif_send",post_id:c},function(b){a("#id_spnPostNotifStatus").text(b.message),a("#id_spnPostNotifLastSent").text(b.timestamp),a("#id_spnPostNotifLastSent").show()})}});else{var d=a("#id_selPostNotifSchedYear").val(),e=a("#id_selPostNotifSchedMonth").val(),f=a("#id_selPostNotifSchedDay").val(),g=a("#id_selPostNotifSchedHour").val(),h=a("#id_selPostNotifSchedMinute").val(),i=new Date(d,e-1,f,g,h);if(i.getFullYear()!=d||1+i.getMonth()!=e||i.getDate()!=f||i.getMinutes()!=h)return a("#id_spnPostNotifStatus").text(post_notif_send_ajax_obj.invalid_date_format_msg),a("#id_btnPostNotifSend").show(),!1;a("#id_divPostNotifManualSendControls").hide();var j=1+i.getMonth()+":"+i.getDate()+":"+i.getFullYear()+":"+i.getHours()+":"+i.getMinutes(),k=a("#hidden_mm").val()+":"+a("#hidden_jj").val()+":"+a("#hidden_aa").val()+":"+a("#hidden_hh").val()+":"+a("#hidden_mm").val()+":"+a("#hidden_mn").val();a.post(post_notif_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_send_ajax_obj.nonce,action:"schedule_post_notif_send",post_id:c,datetime_local:j,publish_datetime_local:k},function(b){b.valid_datetime?(a("#id_spnPostNotifSendSchedTimestamp").hide(),a("#id_spnPostNotifScheduledFor").text(b.timestamp),a("#id_spnPostNotifScheduledFor").show(),a("#id_btnPostNotifCancelSchedSend").show()):(a("#id_divPostNotifManualSendControls").show(),a("#id_btnPostNotifSend").show()),a("#id_spnPostNotifStatus").text(b.message)})}})}),a(function(){a("#id_btnPostNotifCancelSchedSend").click(function(b){var c=document.getElementById("id_hdnPostID").value;a("#id_btnPostNotifCancelSchedSend").hide(),a.post(post_notif_cancel_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_cancel_send_ajax_obj.nonce,action:"unschedule_post_notif_send",post_id:c},function(b){a("#id_spnPostNotifScheduledFor").hide(),a("#id_divPostNotifManualSend").hide(),b.update_last_sent&&(a("#id_spnPostNotifLastSent").text(b.update_last_sent_text),a("#id_spnPostNotifLastSent").show()),b.cancelled&&(a("#id_spnPostNotifSendNowOrSchedActive").hasClass("pn-schedule")&&a("#id_spnPostNotifSendSchedTimestamp").show(),a("#id_spnPostNotifSendNowOrSchedActive").show(),a("#id_divPostNotifManualSendControls").show(),a("#id_divPostNotifManualSend").show(),a("#id_btnPostNotifSend").show()),a("#id_spnPostNotifStatus").text(b.message)})})}),a(function(){a("#id_btnPostNotifTestSend").click(function(b){var c=a("#id_hdnPostID").val(),d=a("#id_emlPostNotifTestSendRecipients").val();jQuery("#id_spnPostNotifTestSendStatus").text(post_notif_test_send_ajax_obj.processing_msg),a.post(post_notif_test_send_ajax_obj.ajax_url,{_ajax_nonce:post_notif_test_send_ajax_obj.nonce,action:"test_post_notif_send",post_id:c,recipients:d},function(a){var b="",c="";a.sent_email_arr.length>0&&(b="<strong>"+a.successfully_sent_label+"</strong><br />",a.sent_email_arr.forEach(function(a){b=b+a+"<br />"}),b+="<br /><br />"),a.invalid_email_arr.length>0&&(c="<strong>"+a.invalid_email_address_label+"</strong><br />",a.invalid_email_arr.forEach(function(a){c=c+a+"<br />"})),jQuery("#id_spnPostNotifTestSendStatus").html(a.process_complete_message+"<br /><br />"+b+c)})})}),a(function(){a("#id_lnkPostNotifSchedAuto").click(function(b){a(this).hasClass("pn-auto")?(a(this).removeClass("pn-auto").addClass("pn-manual"),a("#id_spnPostNotifSchedActive").text(a("#id_hdnPostNotifManualOptionLabel").val()),a("#id_spnPostNotifSchedInactive").text(a("#id_hdnPostNotifAutoOptionLabel").val()),a("#id_hdnPostNotifSchedAuto").val("no"),a("#id_divPostNotifManualSend").show()):(a(this).removeClass("pn-manual").addClass("pn-auto"),a("#id_spnPostNotifSchedActive").text(a("#id_hdnPostNotifAutoOptionLabel").val()),a("#id_spnPostNotifSchedInactive").text(a("#id_hdnPostNotifManualOptionLabel").val()),a("#id_hdnPostNotifSchedAuto").val("yes"),a("#id_divPostNotifManualSend").hide())})}),a(function(){a("#id_lnkPostNotifSendNowOrSched").click(function(b){a("#id_spnPostNotifStatus").text(""),a("#id_spnPostNotifSendNowOrSchedActive").hasClass("pn-schedule")?(a("#id_spnPostNotifSendNowOrSchedActive").removeClass("pn-schedule").addClass("pn-sendnow"),a("#id_spnPostNotifSendNowOrSchedActive").text(a("#id_hdnPostNotifSendNowOptionLabel").val()),a("#id_spnPostNotifSendNowOrSchedInactive").text(a("#id_hdnPostNotifScheduleOptionLabel").val()),a("#id_spnPostNotifSendSchedTimestamp").hide(),a("#id_btnPostNotifSend").prop("value",jQuery("#id_hdnPostNotifSendNowButtonLabel").val())):(a("#id_spnPostNotifSendNowOrSchedActive").removeClass("pn-sendnow").addClass("pn-schedule"),a("#id_spnPostNotifSendNowOrSchedActive").text(a("#id_hdnPostNotifScheduleOptionLabel").val()),a("#id_spnPostNotifSendNowOrSchedInactive").text(a("#id_hdnPostNotifSendNowOptionLabel").val()),a("#id_spnPostNotifSendSchedTimestamp").show(),a("#id_btnPostNotifSend").prop("value",jQuery("#id_hdnPostNotifScheduleButtonLabel").val()))})}),a(function(){a("#available_categories\\[0\\]").click(function(b){this.checked?a(".cats").each(function(){this.checked=!0,this.disabled=!0}):a(".cats").each(function(){this.checked=!1,this.disabled=!1})})})}(jQuery);
